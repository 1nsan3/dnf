

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DNF User’s FAQ &mdash; DNF 0.5.0-1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.5.0-1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="DNF 0.5.0-1 documentation" href="index.html" />
    <link rel="prev" title="Command Line Interface Hooks" href="api_cli.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api_cli.html" title="Command Line Interface Hooks"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">DNF 0.5.0-1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="dnf-user-s-faq">
<h1><a class="toc-backref" href="#id2">DNF User&#8217;s FAQ</a><a class="headerlink" href="#dnf-user-s-faq" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dnf-user-s-faq" id="id2">DNF User&#8217;s FAQ</a><ul>
<li><a class="reference internal" href="#general-questions" id="id3">General Questions</a><ul>
<li><a class="reference internal" href="#what-does-dnf-stand-for" id="id4">What does DNF stand for?</a></li>
<li><a class="reference internal" href="#what-to-do-with-packages-that-dnf-refuses-to-remove-because-their-pre-or-preun-scripts-are-failing" id="id5">What to do with packages that DNF refuses to remove because their <tt class="docutils literal"><span class="pre">%pre</span></tt> or <tt class="docutils literal"><span class="pre">%preun</span></tt> scripts are failing?</a></li>
<li><a class="reference internal" href="#why-are-dnf-check-update-packages-not-marked-for-upgrade-in-the-following-dnf-upgrade" id="id6">Why are <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">check-update</span></tt> packages not marked for upgrade in the following <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">upgrade</span></tt></a></li>
<li><a class="reference internal" href="#why-do-i-get-different-results-with-dnf-update-vs-yum-update" id="id7">Why do I get different results with <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">update</span></tt> vs <tt class="docutils literal"><span class="pre">yum</span> <span class="pre">update</span></tt>?</a></li>
<li><a class="reference internal" href="#is-it-possible-to-force-dnf-to-get-the-latest-metadata-on-dnf-upgrade" id="id8">Is it possible to force DNF to get the latest metadata on <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">upgrade</span></tt>?</a></li>
<li><a class="reference internal" href="#how-do-i-disable-automatic-metadata-synchronization-service" id="id9">How do I disable automatic metadata synchronization service?</a></li>
<li><a class="reference internal" href="#shouldn-t-dnf-exit-soon-from-certain-commands-if-it-is-not-run-under-root" id="id10">Shouldn&#8217;t DNF exit soon from certain commands if it is not run under root?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-dnf-in-fedora" id="id11">Using DNF in Fedora</a><ul>
<li><a class="reference internal" href="#for-my-stable-fedora-release-can-i-install-the-rawhide-packages-for-testing-purposes" id="id12">For my stable Fedora release, can I install the rawhide packages for testing purposes?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="general-questions">
<h2><a class="toc-backref" href="#id3">General Questions</a><a class="headerlink" href="#general-questions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-does-dnf-stand-for">
<h3><a class="toc-backref" href="#id4">What does DNF stand for?</a><a class="headerlink" href="#what-does-dnf-stand-for" title="Permalink to this headline">¶</a></h3>
<p>Dandified <a class="reference external" href="http://yum.baseurl.org/">Yum</a>.</p>
</div>
<div class="section" id="what-to-do-with-packages-that-dnf-refuses-to-remove-because-their-pre-or-preun-scripts-are-failing">
<h3><a class="toc-backref" href="#id5">What to do with packages that DNF refuses to remove because their <tt class="docutils literal"><span class="pre">%pre</span></tt> or <tt class="docutils literal"><span class="pre">%preun</span></tt> scripts are failing?</a><a class="headerlink" href="#what-to-do-with-packages-that-dnf-refuses-to-remove-because-their-pre-or-preun-scripts-are-failing" title="Permalink to this headline">¶</a></h3>
<p>If this happens, it is a packaging error and consider reporting the failure to
the package&#8217;s maintainer.</p>
<p>You can usually remove such package with <tt class="docutils literal"><span class="pre">rpm</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rpm</span> <span class="o">-</span><span class="n">e</span> <span class="o">&lt;</span><span class="n">package</span><span class="o">-</span><span class="n">version</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">noscripts</span>
</pre></div>
</div>
</div>
<div class="section" id="why-are-dnf-check-update-packages-not-marked-for-upgrade-in-the-following-dnf-upgrade">
<h3><a class="toc-backref" href="#id6">Why are <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">check-update</span></tt> packages not marked for upgrade in the following <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">upgrade</span></tt></a><a class="headerlink" href="#why-are-dnf-check-update-packages-not-marked-for-upgrade-in-the-following-dnf-upgrade" title="Permalink to this headline">¶</a></h3>
<p>Sometimes one can see that a newer version of a package is available in the repos:</p>
<div class="highlight-python"><pre>$ dnf check-update
libocsync0.x86_64 0.91.4-2.1              devel_repo
owncloud-client.x86_64 1.5.0-18.1         devel_repo</pre>
</div>
<p>Yet the immediately following <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">upgrade</span></tt> does not offer them for upgrade:</p>
<div class="highlight-python"><pre>$ dnf upgrade
Resolving dependencies
--&gt; Starting dependency resolution
--&gt; Finished dependency resolution
Dependencies resolved.
Nothing to do.</pre>
</div>
<p>It might seem odd but in fact this can happen quite easily: what the first command does is only check whether there are some available packages with the same name as an installed package but with a higher version. Those are considered upgrade candidates by <tt class="docutils literal"><span class="pre">check-update</span></tt>, but no actual dependency resolving takes place there. That only happens during <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">upgrade</span></tt> and if the resolving procedure then discovers that some of the packages do not have their dependencies ready yet, then they are not offered in the upgrade. To see the precise reason why it was not possible to do the upgrade in this case, use:</p>
<div class="highlight-python"><pre>$ dnf upgrade --best</pre>
</div>
</div>
<div class="section" id="why-do-i-get-different-results-with-dnf-update-vs-yum-update">
<h3><a class="toc-backref" href="#id7">Why do I get different results with <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">update</span></tt> vs <tt class="docutils literal"><span class="pre">yum</span> <span class="pre">update</span></tt>?</a><a class="headerlink" href="#why-do-i-get-different-results-with-dnf-update-vs-yum-update" title="Permalink to this headline">¶</a></h3>
<p>We get this reported as a bug quite often, but it usually is not. One reason to see this is that DNF does not list update candidates as it explores them. More frequently however the reporter means actual difference in the proposed transaction. This is most often because the metadata the two packagers are working with were taken at a different time (DNF has a notoriously looser schedule on metadata updates to save time and bandwidth), and sometimes also because the depsolvers inside are designed to take a different course of action when encountering some specific update scenario.</p>
<p>The bottom line is: unless a real update problem occurs (i.e. DNF refuses to update a package that Yum updates) with the same set of metadata, this is not an issue.</p>
</div>
<div class="section" id="is-it-possible-to-force-dnf-to-get-the-latest-metadata-on-dnf-upgrade">
<h3><a class="toc-backref" href="#id8">Is it possible to force DNF to get the latest metadata on <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">upgrade</span></tt>?</a><a class="headerlink" href="#is-it-possible-to-force-dnf-to-get-the-latest-metadata-on-dnf-upgrade" title="Permalink to this headline">¶</a></h3>
<p>Yes, clear the cache first:</p>
<div class="highlight-python"><pre>$ dnf clean metadata
$ dnf upgrade</pre>
</div>
<p>An alternative is to shorten the default expiry time of repos, for that edit <tt class="docutils literal"><span class="pre">/etc/dnf/dnf.conf</span></tt> and set:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">metadata_expire</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>Of course, some repos might use a custom <tt class="docutils literal"><span class="pre">metadata_expire</span></tt> value, you&#8217;ll currently have to change these manually too.</p>
<p>If you&#8217;re the kind of the user who always wants the freshest metadata possible, you&#8217;ll probably want to <a class="reference internal" href="#disabling-makecache-service-label"><em>disable the automatic MD updates</em></a>.</p>
</div>
<div class="section" id="how-do-i-disable-automatic-metadata-synchronization-service">
<span id="disabling-makecache-service-label"></span><h3><a class="toc-backref" href="#id9">How do I disable automatic metadata synchronization service?</a><a class="headerlink" href="#how-do-i-disable-automatic-metadata-synchronization-service" title="Permalink to this headline">¶</a></h3>
<p>Several ways to do that. The DNF way is to add the following to <tt class="docutils literal"><span class="pre">/etc/dnf/dnf.conf</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">metadata_timer_sync</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="section" id="shouldn-t-dnf-exit-soon-from-certain-commands-if-it-is-not-run-under-root">
<h3><a class="toc-backref" href="#id10">Shouldn&#8217;t DNF exit soon from certain commands if it is not run under root?</a><a class="headerlink" href="#shouldn-t-dnf-exit-soon-from-certain-commands-if-it-is-not-run-under-root" title="Permalink to this headline">¶</a></h3>
<p>No, there can be systems and scenarios that allow other users than root to successfully perform <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">intall</span></tt> and similar and it would be impractical to stop these from functioning by the UID check. Alternatively, the practice of checking filesystem permissions instead of the effective UID could lead to false positives since there is plenty of time between DNF startup and the possible transaction start when permissions can be changed by a different process.</p>
<p>If the time loss incurred by repeated runs of DNF is unacceptable for you, consider using the <a class="reference external" href="https://github.com/akozumpl/dnf-plugins-core/blob/master/plugins/noroot.py">noroot plugin</a>.</p>
</div>
</div>
<div class="section" id="using-dnf-in-fedora">
<h2><a class="toc-backref" href="#id11">Using DNF in Fedora</a><a class="headerlink" href="#using-dnf-in-fedora" title="Permalink to this headline">¶</a></h2>
<div class="section" id="for-my-stable-fedora-release-can-i-install-the-rawhide-packages-for-testing-purposes">
<h3><a class="toc-backref" href="#id12">For my stable Fedora release, can I install the rawhide packages for testing purposes?</a><a class="headerlink" href="#for-my-stable-fedora-release-can-i-install-the-rawhide-packages-for-testing-purposes" title="Permalink to this headline">¶</a></h3>
<p>Yes, in two steps: first install the necessary <tt class="docutils literal"><span class="pre">.repo</span></tt> files:</p>
<div class="highlight-python"><pre>dnf install fedora-release-rawhide</pre>
</div>
<p>Then, when you want to include the packages from the rawhide repo, execute a DNF command with Rawhide enabled:</p>
<div class="highlight-python"><pre>dnf install --enablerepo=rawhide upgrade rpm</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Installing rawhide packages onto a stable Fedora release system is generally discouraged as it leads to less tested combinations of installed packages. Please consider this step carefully.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">DNF User&#8217;s FAQ</a><ul>
<li><a class="reference internal" href="#general-questions">General Questions</a><ul>
<li><a class="reference internal" href="#what-does-dnf-stand-for">What does DNF stand for?</a></li>
<li><a class="reference internal" href="#what-to-do-with-packages-that-dnf-refuses-to-remove-because-their-pre-or-preun-scripts-are-failing">What to do with packages that DNF refuses to remove because their <tt class="docutils literal"><span class="pre">%pre</span></tt> or <tt class="docutils literal"><span class="pre">%preun</span></tt> scripts are failing?</a></li>
<li><a class="reference internal" href="#why-are-dnf-check-update-packages-not-marked-for-upgrade-in-the-following-dnf-upgrade">Why are <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">check-update</span></tt> packages not marked for upgrade in the following <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">upgrade</span></tt></a></li>
<li><a class="reference internal" href="#why-do-i-get-different-results-with-dnf-update-vs-yum-update">Why do I get different results with <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">update</span></tt> vs <tt class="docutils literal"><span class="pre">yum</span> <span class="pre">update</span></tt>?</a></li>
<li><a class="reference internal" href="#is-it-possible-to-force-dnf-to-get-the-latest-metadata-on-dnf-upgrade">Is it possible to force DNF to get the latest metadata on <tt class="docutils literal"><span class="pre">dnf</span> <span class="pre">upgrade</span></tt>?</a></li>
<li><a class="reference internal" href="#how-do-i-disable-automatic-metadata-synchronization-service">How do I disable automatic metadata synchronization service?</a></li>
<li><a class="reference internal" href="#shouldn-t-dnf-exit-soon-from-certain-commands-if-it-is-not-run-under-root">Shouldn&#8217;t DNF exit soon from certain commands if it is not run under root?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-dnf-in-fedora">Using DNF in Fedora</a><ul>
<li><a class="reference internal" href="#for-my-stable-fedora-release-can-i-install-the-rawhide-packages-for-testing-purposes">For my stable Fedora release, can I install the rawhide packages for testing purposes?</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="api_cli.html"
                        title="previous chapter">Command Line Interface Hooks</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/user_faq.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api_cli.html" title="Command Line Interface Hooks"
             >previous</a> |</li>
        <li><a href="index.html">DNF 0.5.0-1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012-2013, Red Hat.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>